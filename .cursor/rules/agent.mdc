---
description:
globs:
alwaysApply: true
---
# Cursor Rules for BNB Trading System

## üéØ Project Type
Simple, modular BNB swing trading system with technical analysis. Target: **75%+ accuracy**.

## üöÄ Core Principles
- **Keep it simple** - no over-engineering
- **Modular design** - each indicator in separate file
- **Configuration-driven** - all parameters in config.toml
- **Easy to tune** - change settings without touching code


## üîß Code Standards
- Python 3.8+ with type hints
- Use pandas, numpy, ccxt, ta-lib
- Handle NaN with `np.nan_to_num()`
- Log all operations
- Try/catch for API calls
- Save everything in CSV for analysis

### üìè Line Length & Code Quality Rules
**Why Long Lines (E501) are the Hardest to Fix:**

1. **Trading Logic Complexity**: Financial calculations often require complex formulas that don't break naturally:
   ```python
   # Complex formula that's hard to split meaningfully
   confidence_score = (fibonacci_weight * fib_strength +
                      volume_weight * volume_confirmation +
                      trend_weight * trend_alignment) / total_weights
   ```

2. **F-String Formatting**: Trading systems use detailed logging with multiple variables:
   ```python
   # Hard to break without losing readability
   logger.info(f"Signal: {signal_type} at ${price:.2f} with confidence {confidence:.1f}% - Fib: {fib_level:.1f}%, Volume: {volume_ratio:.2f}x")
   ```

3. **Nested Dictionary Access**: Financial data structures are deeply nested:
   ```python
   # Breaking this makes code harder to understand
   analysis_result = signal["fibonacci_analysis"]["confluence_points"][0]["resistance_levels"]
   ```

4. **Why We Don't Write Short Lines from Start:**
   - **Development Speed**: During rapid prototyping, we focus on functionality over formatting
   - **Readability Priority**: Sometimes a long line is more readable than broken lines
   - **Business Logic First**: Trading logic clarity is more important than line length
   - **Complex Domain**: Financial calculations naturally create longer expressions

**‚úÖ Acceptable E501 Cases in Trading Systems:**
- Complex financial formulas that lose meaning when split
- Detailed logging messages with multiple trading parameters
- Nested financial data structure access
- Configuration parameter chains for trading indicators

**üéØ Strategy**: Focus on fixing critical issues first (F841, E203, E127), then accept reasonable E501 cases in complex trading logic. Production systems with 70 E501 issues are acceptable when functionality and reliability are maintained.

## üéØ Trading Signals Philosophy

### ‚úÖ –£–°–ü–ï–• –µ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ —Å–∏–≥–Ω–∞–ª–∏!
**LONG —Å–∏–≥–Ω–∞–ª–∏:**
- **–£—Å–ø–µ—Ö –µ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ LONG —Å–∏–≥–Ω–∞–ª–∏** - —Å–∏—Å—Ç–µ–º–∞—Ç–∞ —Ä–∞–±–æ—Ç–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ
- **–¢—Ä—è–±–≤–∞ –¥–∞ –∑–∞–ø–∞–∑–∏–º –≤–∏—Å–æ–∫–∞ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç** - —Ü–µ–ª 100% –∑–∞ LONG —Å–∏–≥–Ω–∞–ª–∏
- **LONG —Å–∏–≥–Ω–∞–ª–∏—Ç–µ —Å–∞ –æ—Å–Ω–æ–≤–∞—Ç–∞** - —Ç–µ –Ω–æ—Å—è—Ç –æ—Å–Ω–æ–≤–Ω–∞—Ç–∞ –ø–µ—á–∞–ª–±–∞

**SHORT —Å–∏–≥–Ω–∞–ª–∏:**
- **–£—Å–ø–µ—Ö –µ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ SHORT —Å–∏–≥–Ω–∞–ª–∏** - —Å–∏—Å—Ç–µ–º–∞—Ç–∞ —Ä–∞–±–æ—Ç–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ
- **–ò—Å—Ç–∏–Ω—Å–∫–∏—è—Ç —É—Å–ø–µ—Ö –µ –ø–µ—á–µ–ª–∏–≤—à–∏ SHORT —Å–∏–≥–Ω–∞–ª–∏** - —Å–∏–≥–Ω–∞–ª–∏—Ç–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–æ–¥—è—Ç –¥–æ –ø–µ—á–∞–ª–±–∞
- **–¶–µ–ª: –°–∞–º–æ 1 –ø–µ—á–µ–ª–∏–≤—à SHORT —Å–∏–≥–Ω–∞–ª** - –ø–æ-–¥–æ–±—Ä–µ 1 –ø–µ—á–µ–ª–∏–≤—à –æ—Ç–∫–æ–ª–∫–æ—Ç–æ 100 –≥—É–±–µ—â–∏
- **–ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** - —Ñ–æ–∫—É—Å–∏—Ä–∞–º–µ —Å–µ –≤—ä—Ä—Ö—É accuracy, –Ω–µ –≤—ä—Ä—Ö—É –±—Ä–æ–π —Å–∏–≥–Ω–∞–ª–∏

### üîç –ó–∞—â–æ —Å–∏–≥–Ω–∞–ª–∏—Ç–µ —Å–∞ –≤–∞–∂–Ω–∏:
**LONG —Å–∏–≥–Ω–∞–ª–∏:**
- **–û—Å–Ω–æ–≤–Ω–∞ –ø–µ—á–∞–ª–±–∞** - –≤ bull markets –Ω–æ—Å—è—Ç –æ—Å–Ω–æ–≤–Ω–∞—Ç–∞ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç
- **–ù–∏—Å—ä–∫ —Ä–∏—Å–∫** - —Å–ª–µ–¥–≤–∞—Ç —Ç—Ä–µ–Ω–¥–∞ –Ω–∞–≥–æ—Ä–µ
- **–í–∏—Å–æ–∫–∞ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç** - –ª–µ—Å–Ω–∏ –∑–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–∞–Ω–µ –≤ —Å–∏–ª–Ω–∏ —Ç—Ä–µ–Ω–¥–æ–≤–µ

**SHORT —Å–∏–≥–Ω–∞–ª–∏:**
- **–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - LONG + SHORT —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞–º–∞–ª—è–≤–∞ risk
- **Bull/Bear market –∞–¥–∞–ø—Ç–∞—Ü–∏—è** - SHORT –ø–µ—á–µ–ª–∏ –∫–æ–≥–∞—Ç–æ –ø–∞–∑–∞—Ä–∞ –ø–∞–¥–∞
- **Complete trading system** - –∏—Å—Ç–∏–Ω—Å–∫–∞ —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –º–æ–∂–µ –∏ –¥–≤–∞—Ç–∞ –ø–æ—Å–æ–∫–∏

### üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞ –£—Å–ø–µ—Ö:

**LONG —Å–∏–≥–Ω–∞–ª–∏:**
- **Accuracy > 95%** - –ø–æ—á—Ç–∏ –≤—Å–∏—á–∫–∏ LONG —Å–∏–≥–Ω–∞–ª–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–∞ —É—Å–ø–µ—à–Ω–∏
- **Profit Factor > 2.0** - –≤–∏—Å–æ–∫–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç
- **Max Drawdown < 10%** - –º–∏–Ω–∏–º–∞–ª–Ω–∏ –∑–∞–≥—É–±–∏

**SHORT —Å–∏–≥–Ω–∞–ª–∏:**
- **Accuracy > 75%** - –ø–æ–≤–µ—á–µ –ø–µ—á–µ–ª–∏–≤—à–∏ –æ—Ç –≥—É–±–µ—â–∏
- **Profit Factor > 1.0** - –±—Ä—É—Ç–Ω–∞ –ø–µ—á–∞–ª–±–∞ > –±—Ä—É—Ç–Ω–∞ –∑–∞–≥—É–±–∞
- **Max Drawdown < 10%** - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–∞–Ω–∞ –≤–æ–ª–∞—Ç–∏–ª–Ω–æ—Å—Ç
